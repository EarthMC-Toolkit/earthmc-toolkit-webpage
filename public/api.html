<!DOCTYPE HTML>
<html>
	<head>
		<link rel="shortcut icon" href="images/favicon.ico"/>
		<title>EarthMC Toolkit</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body-alt class="is-preload">

		<!-- Header -->
		<header id="header">
			<nav>
				<ul>
					<li><a href="/">Home</a></li>
					<li><a href="/api" class="active">API Docs</a></li>
					<li><a href="/commands">Commands</a></li>	
					<li><a href="/npm">NPM Docs</a></li>
				</ul>
			</nav>
		</header>

		<!-- Wrapper -->
			<div id="wrapper">
				
				<!-- Main -->
					<section id="main" class="wrapper">
						<div class="inner">
							<h1></p>API Documentation <p class="major fas fa-book"></p></h1>
							<p>The EarthMC API is served using Vercel and NextJS serverless functions for optimal response times and reliablity. 
							   It provides plenty of data such as players, towns, nations, alliances and more!
							   The repository is open source and can be found <a href="https://github.com/EarthMC-Toolkit/Toolkit-Website">here.</a>
							
							<!-- Text -->
								<section>
									<h2>Quick Start <p class="major fas fa-bolt"></p></h2>
									<p>For this example, we will use JavaScript combined with the
										<a href="https://npmjs.com">Node Package Manager</a> to install a fetch package that will allow us to send <b>GET</b> requests.<br>
										<br><blockquote>Note: To stop abuse, there is a rate limit of <b>28</b> requests per <b>16</b> seconds.</blockquote>
										 1. Install a fetch package in your chosen language.</p>
										<code>$ npm install node-fetch</code>
										<br><br>2. Require/import the package.</p>
										<code>const fetch = require('node-fetch')</code>
										<br><br>3. Send a get request to the specified route, and wait for the result.<br>
										<pre><code>var towns = await fetch('https://emctoolkit.vercel.app/api/aurora/towns').catch(() => {})
if (!towns) {
	// Handle error
}

// Example code
towns = towns.map(t => t.area > 50) // Only get towns with more than 50 chunks claimed.
console.log(towns)
</code></pre>
								</section>

							<!-- Lists -->
								<section>
									<h2>Endpoint Info</h2>
									<body>
										<section>
											<p>This section provides all of the endpoints available for use, 
											   note that for generic routes you will not need to pass in a map to the URL.
											</p>
											<p>To begin, your URL to fetch must begin with the following:<code>https://emc-toolkit.vercel.app/api/</code><br>
											   Then, one of the routes from the list below can be appended to create a full endpoint.</p>
											<h3>Route List</h3>
										  <article>
											<details>
											  <summary>Generic</summary>											  
											  <details>
												<summary>Server Info</summary>
												<p>Route Name:<code>serverinfo</code>
													<br>Response: Object | Error string + 404
													<br>Timeout (ms):<code>5000</code></p>	
											  </details>
											</details>
											<details>
											  <summary>Map Specific</summary>
											  <p>Replace the 'map' parameter with the map name.</p>
											  <details>
												<summary>All Players</summary>
												<p>Route Name:<code>map/allplayers</code>
												<br>Response: Array of players. (with custom data)
												<br>Timeout (ms):<code>15000</code></p>
											  </details>
											  <details>
												<summary>Online Players</summary>
												<p>Route Name:<code>map/onlineplayers</code>
												<br>Response: Array of online players.
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Townless Players</summary>
												<p>Route Name:<code>map/townlessplayers</code>
												<br>Response: Array of townless players.
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Residents</summary>
												<p>Route Name:<code>map/residents</code>
												<br>Response: Array of residents from all towns.
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Towns</summary>
												<p>Route Name:<code>map/towns</code>
												<br>Response: Array of towns.
												<br>Timeout (ms):<code>10000</code></p>
												<details>
													<summary>Joinable Nations</summary>
													<p>Route Name:<code>map/towns/townName/joinable</code>
													<br>Response: Array of nations the specified town can join.
													<br>Timeout (ms):<code>10000</code></p>
												  </details>
											  </details>
											  <details>
												<summary>Nations</summary>
												<p>Route Name:<code>map/nations</code>
												<br>Response: Array of nations.
												<br>Timeout (ms):<code>30000</code></p>
												<details>
													<summary>Invitable Towns</summary>
													<p>Route Name:<code>map/nations/nationName/invitable</code>
													<br>Response: Array of towns within the nation's invite range.
													<br>Timeout (ms):<code>10000</code></p>
												</details>
											  </details>
											  <details>
												<summary>Alliances</summary>
												<p>Route Name:<code>map/alliances</code>
												<br>Response: Array of alliances. (Registered by our editors)
												<br>Timeout (ms):<code>10000</code></p>
											  </details>
											  <details>
												<summary>News</summary>
												<p>Route Name:<code>map/news</code>
												<br>Response: Object with the latest news. (Reported in EMCL)
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Nearby</summary>											
												<details>
													<summary>Players</summary>
													<p>Route Name:<code>map/nearbyplayers/xPos/zPos/xBlocks/zBlocks</code>
													<br>Response: Array of nearby players within at the specified position and radius.
													<br>Timeout (ms):<code>5000</code></p>
												  </details>
												<details>
													<summary>Towns</summary>
													<p>Route Name:<code>map/nearbytowns/xPos/zPos/xBlocks/zBlocks/</code>
													<br>Response: Array of nearby towns within at the specified position and radius.
													<br>Timeout (ms):<code>5000</code></p>
												  </details>
												<details>
													<summary>Nations</summary>
													<p>Route Name:<code>map/nearbynations/xPos/zPos/xBlocks/zBlocks</code>
													<br>Response: Array of nearby nations within at the specified position and radius.
													<br>Timeout (ms):<code>5000</code></p>
												</details>
											  </details>
											</details>
										  </article>
									  
										</section>
									  </body>

									<h2>Getting Data</h2>
									<div class="row">
										<div class="col-6 col-12-medium">
											<h3>Get single object</h3>
											<ul class="alt">
												<li>Supported: <code>Town</code><code>Nation</code><code>Resident</code><code>Player</code><code>Alliance </code></li>
												<li>Example code. Will return the object if valid, otherwise "Does not exist" string with status 404.</li>
<pre><code>var player = await fetch('https://emc-toolkit.vercel.app/api/aurora/allplayers/playerName')
		  	  .then(p => console.log(p)).catch(() => {})
</code></pre>
											<h3>Get array of objects</h3>
												<li>Supported: <code>Town</code><code>Nation</code><code>Resident</code><code>Player</code><code>Alliance </code></li>
											</ul>
										</div>
									</div>
								</section>

								<section>
									<div class="col-6 col-12-medium" style="font-size: 22px;">
										<h3>Links</h3>
										<ul class="icons">
											<li><a href="" class="icon brands fa-discord"><span class="label">Discord Support</span></a>
											<li><a href="" class="icon brands fa-github"><span class="label">Github</span></a></li>
										</ul>
									</div>
								</section>

						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
