<!DOCTYPE HTML>
<html>
	<head>
		<link rel="shortcut icon" href="images/favicon.ico"/>
		<title>EarthMC Toolkit</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body-alt class="is-preload">

		<!-- Header -->
		<header id="header">
			<nav>
				<ul>
					<li><a href="/">Home</a></li>
					<li><a href="/api" class="active">API Docs</a></li>
					<li><a href="/commands">Commands</a></li>	
					<li><a href="/npm">NPM Docs</a></li>
				</ul>
			</nav>
		</header>

		<!-- Wrapper -->
			<div id="wrapper">
				
				<!-- Main -->
					<section id="main" class="wrapper">
						<div class="inner">
							<h1></p>API Documentation <p class="major fas fa-book"></p></h1>
							<p>The EarthMC API is served using Vercel and NextJS serverless functions for optimal response times and reliablity. 
							   It provides plenty of data such as players, towns, nations, alliances and more!
							   The repository is open source and can be found <a href="https://github.com/EarthMC-Toolkit/Toolkit-Website">here.</a>
							
							<!-- Text -->
								<section>
									<h2>Quick Start <p class="major fas fa-bolt"></p></h2>
									<p>For this example, we will use JavaScript combined with the
										<a href="https://npmjs.com">Node Package Manager</a> to install a fetch package that will allow us to send <b>GET</b> requests.<br>
										<blockquote>Note: To stop abuse, there is a rate limit of <b>10</b> requests per <b>8</b> seconds.</blockquote>
										 1. Install a fetch package in your chosen language.</p>
										<code>$ npm install node-fetch</code>
										<br><br>2. Require/import the package.</p>
										<code>const fetch = require('node-fetch')</code>
										<br><br>3. Send a get request to the specified route, and wait for the result.<br>
										<pre><code>var towns = await fetch('https://emctoolkit.vercel.app/api/aurora/towns').catch(() => {})
if (!towns) {
	// Handle error
}

// Example code
towns = towns.map(t => t.area > 50) // Only get towns with more than 50 chunks claimed.
console.log(towns)
</code></pre>
								</section>

							<!-- Lists -->
								<section>
									<h2>Usage</h2>
									<body>
										<section>
											<p>This section provides all of the endpoints available for use, 
											   note that for generic routes you don't need to specify a map.
											</p>
											<p>To begin, your URL to fetch must begin with the following:<code>https://emc-toolkit.vercel.app/api/</code><br>
											   Then, one of the routes from the list below can be appended to create a full endpoint.</p>
											<h3>List of Endpoints</h3>
										  <article>
											<details>
											  <summary>Generic</summary>											  
											  <details>
												<summary>Server Info</summary>
												<p>Endpoint:<code>serverinfo</code>
													<br>Response: Object | Error string + 404
													<br>Timeout (ms):<code>5000</code></p>	
											  </details>
											  <details>
												<summary>Archive (Map Data)</summary>
												<p>Endpoint:<code>archive/timestamp?map=mapName</code>
													<br>Response: Object | Error 500
													<br>Timeout (ms):<code>10000</code></p>	
											  </details>
											</details>
											<details>
											  <summary>Map Specific</summary>
											  <p>Replace the 'map' parameter with the map name.</p>
											  <details>
												<summary>All Players</summary>
												<p>Endpoint:<code>map/allplayers</code>
												<br>Response: Array of players. (with custom data)
												<br>Timeout (ms):<code>15000</code></p>
											  </details>
											  <details>
												<summary>Online Players</summary>
												<p>Endpoint:<code>map/onlineplayers</code>
												<br>Response: Array of online players.
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Townless Players</summary>
												<p>Endpoint:<code>map/townlessplayers</code>
												<br>Response: Array of townless players.
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Residents</summary>
												<p>Endpoint:<code>map/residents</code>
												<br>Response: Array of residents from all towns.
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Towns</summary>
												<p>Endpoint:<code>map/towns</code>
												<br>Response: Array of towns.
												<br>Timeout (ms):<code>10000</code></p>
												<details>
													<summary>Joinable Nations</summary>
													<p>Endpoint:<code>map/towns/townName/joinable</code>
													<br>Response: Array of nations the specified town can join.
													<br>Timeout (ms):<code>10000</code></p>
												  </details>
											  </details>
											  <details>
												<summary>Nations</summary>
												<p>Endpoint:<code>map/nations</code>
												<br>Response: Array of nations.
												<br>Timeout (ms):<code>30000</code></p>
												<details>
													<summary>Invitable Towns</summary>
													<p>Endpoint:<code>map/nations/nationName/invitable</code>
													<br>Response: Array of towns within the nation's invite range.
													<br>Timeout (ms):<code>10000</code></p>
												</details>
											  </details>
											  <details>
												<summary>Alliances</summary>
												<p>Endpoint:<code>map/alliances</code>
												<br>Response: Array of alliances. (Registered by our editors)
												<br>Timeout (ms):<code>10000</code></p>
											  </details>
											  <details>
												<summary>News</summary>
												<p>Endpoint:<code>map/news</code>
												<br>Response: Object with the latest news. (Reported in EMCL)
												<br>Timeout (ms):<code>5000</code></p>
											  </details>
											  <details>
												<summary>Nearby</summary>											
												<details>
													<summary>Players</summary>
													<p>Endpoint:<code>map/nearby/players/xPos/zPos/xBlocks/zBlocks</code>
													<br>Response: Array of nearby players within at the specified position and radius.
													<br>Timeout (ms):<code>5000</code></p>
												  </details>
												<details>
													<summary>Towns</summary>
													<p>Endpoint:<code>map/nearby/towns/xPos/zPos/xBlocks/zBlocks/</code>
													<br>Response: Array of nearby towns within at the specified position and radius.
													<br>Timeout (ms):<code>5000</code></p>
												  </details>
												<details>
													<summary>Nations</summary>
													<p>Endpoint:<code>map/nearby/nations/xPos/zPos/xBlocks/zBlocks</code>
													<br>Response: Array of nearby nations within at the specified position and radius.
													<br>Timeout (ms):<code>5000</code></p>
												</details>
											  </details>
											</details>
										  </article>
									  
										</section>
									  </body>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
